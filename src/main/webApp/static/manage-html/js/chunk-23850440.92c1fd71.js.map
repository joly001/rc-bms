{"version":3,"sources":["webpack:///./src/views/command/Org.vue?b144","webpack:///./src/views/command/Org.vue?ea29","webpack:///src/views/command/Org.vue","webpack:///./src/views/command/Org.vue?9245","webpack:///./src/views/command/Org.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","showDialog","_v","attrs","_m","_l","table","item","key","style","marginLeft","tier","_s","orgName","orgDesc","remove","title","dialog","ref","directives","name","rawName","value","expression","org","query","parentName","model","callback","$$v","$set","addEdit","staticRenderFns","component"],"mappings":"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","file":"js/chunk-23850440.92c1fd71.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./Org.vue?vue&type=style&index=0&id=37024fea&lang=sass&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./Org.vue?vue&type=style&index=0&id=37024fea&lang=sass&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"table-box\"},[_c('div',{staticClass:\"btn-main btn-add mb20\",on:{\"click\":function($event){return _vm.showDialog('top')}}},[_vm._v(\"新建顶级组织机构\")]),_c('table',{staticClass:\"table\",attrs:{\"cellspacing\":\"0\"}},[_vm._m(0),_vm._l((_vm.table.list),function(item,key){return _c('tr',{key:key},[_c('td',[_c('span',{staticClass:\"el-icon-caret-bottom\",style:({marginLeft: 30 * item.tier + 'px'})}),_vm._v(\"\\n          \"+_vm._s(item.orgName)+\"\\n        \")]),_c('td',{attrs:{\"title\":item.orgDesc}},[_vm._v(_vm._s(item.orgDesc))]),_c('td',[_c('span',{staticClass:\"oper\",on:{\"click\":function($event){return _vm.showDialog('childer', item)}}},[_vm._v(\"添加下级组织\")]),_c('span',{staticClass:\"col\"}),_c('span',{staticClass:\"oper\",on:{\"click\":function($event){return _vm.showDialog('edit', item)}}},[_vm._v(\"修改\")]),_c('span',{staticClass:\"col\"}),_c('span',{staticClass:\"oper\",on:{\"click\":function($event){return _vm.remove(item)}}},[_vm._v(\"删除\")])])])})],2)]),_c('el-dialog',{staticClass:\"dialog\",attrs:{\"modal\":false,\"close-on-click-modal\":false,\"center\":\"\",\"title\":_vm.title,\"visible\":_vm.dialog,\"width\":\"420px\"},on:{\"update:visible\":function($event){_vm.dialog=$event}}},[_c('el-form',{ref:\"form\",staticClass:\"form\",attrs:{\"label-width\":\"70px\",\"label-position\":\"left\"}},[_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.title === '添加下级组织'),expression:\"title === '添加下级组织'\"}],attrs:{\"prop\":\"oldPassword\",\"label\":\"上级组织\"}},[_c('el-input',{attrs:{\"value\":_vm.org.query.parentName,\"disabled\":\"\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"oldPassword\",\"label\":\"名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入名称\"},model:{value:(_vm.org.query.orgName),callback:function ($$v) {_vm.$set(_vm.org.query, \"orgName\", $$v)},expression:\"org.query.orgName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"oldPassword\",\"label\":\"说明\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":7,\"placeholder\":\"请输入说明\"},model:{value:(_vm.org.query.orgDesc),callback:function ($$v) {_vm.$set(_vm.org.query, \"orgDesc\", $$v)},expression:\"org.query.orgDesc\"}})],1)],1),_c('div',{staticClass:\"btns mt25\"},[_c('div',{staticClass:\"btn-main mr15\",on:{\"click\":function($event){return _vm.addEdit()}}},[_vm._v(\"提交\")]),_c('div',{staticClass:\"btn-main\",on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"关闭\")])])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('th',{attrs:{\"width\":\"32%\"}},[_vm._v(\"组织架构\")]),_c('th',{attrs:{\"width\":\"49%\"}},[_vm._v(\"说明\")]),_c('th',{attrs:{\"width\":\"19%\"}},[_vm._v(\"操作\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"table-box\">\n      <div @click=\"showDialog('top')\" class=\"btn-main btn-add mb20\">新建顶级组织机构</div>\n      <table cellspacing=\"0\"  class=\"table\">\n        <tr>\n          <th width=\"32%\">组织架构</th>\n          <th width=\"49%\">说明</th>\n          <th width=\"19%\">操作</th>\n        </tr>\n        <tr :key=\"key\" v-for=\"(item,key) in table.list\">\n          <td>\n            <span\n                :style=\"{marginLeft: 30 * item.tier + 'px'}\"\n                class=\"el-icon-caret-bottom\"></span>\n            {{item.orgName}}\n          </td>\n          <td :title=\"item.orgDesc\">{{item.orgDesc}}</td>\n          <td>\n            <span @click=\"showDialog('childer', item)\" class=\"oper\">添加下级组织</span>\n            <span class=\"col\"></span>\n            <span @click=\"showDialog('edit', item)\" class=\"oper\">修改</span>\n            <span class=\"col\"></span>\n            <span @click=\"remove(item)\" class=\"oper\">删除</span>\n          </td>\n        </tr>\n      </table>\n    </div>\n    <el-dialog :modal=\"false\" :close-on-click-modal=\"false\" center :title=\"title\" class=\"dialog\"\n                :visible.sync=\"dialog\" width=\"420px\">\n      <el-form class=\"form\" ref=\"form\" label-width=\"70px\" label-position=\"left\">\n        <el-form-item v-show=\"title === '添加下级组织'\" prop=\"oldPassword\" label=\"上级组织\">\n          <el-input :value=\"org.query.parentName\" disabled></el-input>\n        </el-form-item>\n        <el-form-item prop=\"oldPassword\" label=\"名称\">\n          <el-input v-model=\"org.query.orgName\" placeholder=\"请输入名称\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"oldPassword\" label=\"说明\">\n          <el-input v-model=\"org.query.orgDesc\" type=\"textarea\" :rows=\"7\"  placeholder=\"请输入说明\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div class=\"btns mt25\">\n        <div @click=\"addEdit()\" class=\"btn-main mr15\">提交</div>\n        <div @click=\"dialog = false\" class=\"btn-main\">关闭</div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"Info\",\n    data(){\n      return {\n        title: '新建顶级组织机构',\n        table: {\n          list: [],\n          el: '.table',\n          url: '/organization/all',\n        },\n        org:{\n          url: '/organization/add',\n          query:{\n            orgName: '',\n            orgDesc: '',\n            parentId: ''\n          }\n        },\n        dialog: false,\n        orgList: [],\n        data: [\n            {\n          label: '中铁十五局项目经理管理部',\n          children: [{\n            label: '二级 1-1',\n            children: [{\n              label: '三级 1-1-1'\n            }]\n          }]\n        }, {\n          label: '一级 2',\n          children: [{\n            label: '二级 2-1',\n            children: [{\n              label: '三级 2-1-1'\n            }]\n          }, {\n            label: '二级 2-2',\n            children: [{\n              label: '三级 2-2-1'\n            }]\n          }]\n        }, {\n          label: '一级 3',\n          children: [{\n            label: '二级 3-1',\n            children: [{\n              label: '三级 3-1-1'\n            }]\n          }, {\n            label: '二级 3-2',\n            children: [{\n              label: '三级 3-2-1'\n            }]\n          }]\n        }],\n        defaultProps: {\n          children: 'children',\n          label: 'label'\n        }\n      }\n    },\n    mounted(){\n      this.getOrgList()\n      this.getData()\n    },\n    methods: {\n      handleNodeClick(data) {\n        console.log(data);\n      },\n      // 展现弹窗\n      showDialog(type, item){\n        this.dialog = true\n        this.org.query = {\n          orgName: item ? item.orgName : '',\n          parentName: item ? item.orgName : '',\n          orgDesc: item ?  item.orgDesc : '',\n          parentId: item ? item.id: '',\n          id: item && item.id ? item.id: ''\n        }\n        if(type === 'top'){\n          this.title = '新建顶级组织机构'\n        }else if(type === 'edit'){\n          this.title = '修改组织机构'\n\n        }else{\n          this.title = '添加下级组织'\n          this.org.query.orgName = ''\n          this.org.query.orgDesc = ''\n        }\n      },\n      // 删除\n      async remove(item){\n        await this.$confirm(`删除后数据将无法恢复，是否确认删除？`, '提示', {\n          confirmButtonText: '确认',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n        await this.$ajax({\n          url: '/organization/delete',\n          query:{\n            id: item.id\n          }\n        })\n        this.getData()\n        this.$remind('删除成功')\n      },\n      // 获取组织结构树\n      async getOrgList(){\n        let res = await this.$ajax({\n          url: '/organization/all',\n        })\n      },\n      //\n      async getData(){\n        let res = await this.$ajax(this.table)\n        this.table.list = []\n        let vm = this\n        let i = 0\n        function changeList(list){\n          list.forEach(e=>{\n            vm.table.list.push({\n              orgName: e.orgName,\n              orgDesc: e.orgDesc,\n              id: e.id,\n              tier: i\n            })\n            if(e.childOrgList.length){\n              changeList(e.childOrgList, ++i)\n              i--\n            }\n          })\n        }\n        changeList(res.childOrgList)\n        this.table.list = this.table.list.splice(0,this.table.list.length)\n      },\n      // 新建编辑组织机构\n      async addEdit(){\n        let text = ''\n        let query = JSON.parse(JSON.stringify(this.org))\n        query.query.parentName = undefined\n        if(this.title === '修改组织机构'){\n          text = '修改成功'\n          query.url = '/organization/update'\n          query.query.parentId = undefined\n        }else{\n          text = '新建成功'\n          query.url = '/organization/add'\n          query.query.id = undefined\n        }\n\n        let res = await this.$ajax(query)\n        this.dialog = false\n        this.getData()\n        this.$remind(text)\n      }\n    }\n  }\n</script>\n\n<style lang=\"sass\" scoped>\n  .table-box\n    tr\n      th\n        text-align: left\n        padding-left: 20px\n      th:last-child\n        text-align: center\n        padding-left: 5px\n    tr\n      td\n        text-align: left\n        padding-left: 20px\n      td:last-child\n        text-align: center\n        padding-left: 5px\n      .org-name\n        width: 280px\n        display: inline-block\n\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./Org.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./Org.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Org.vue?vue&type=template&id=37024fea&scoped=true&\"\nimport script from \"./Org.vue?vue&type=script&lang=js&\"\nexport * from \"./Org.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Org.vue?vue&type=style&index=0&id=37024fea&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37024fea\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}